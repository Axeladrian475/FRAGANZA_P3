<div class="carrito-header">
  <h2>Carrito de Compras</h2>
  <a routerLink="/catalogo" class="btn-volver">
    <i class="fa-solid fa-arrow-left"></i> Seguir comprando
  </a>
</div>

<div class="carrito-container">
  <h2>Tu Carrito de Compras</h2>

  <div *ngIf="productosConCantidad().length === 0" class="carrito-vacio">
    <p>Tu carrito est√° vac√≠o.</p>
    <a routerLink="/catalogo" class="btn-volver">Ir al Cat√°logo</a>
  </div>

  <div *ngIf="productosConCantidad().length > 0" class="carrito-contenido">
    <div class="lista-productos">

      <div *ngFor="let item of productosConCantidad()" class="item-carrito">


        <div class="producto-item-imagen-contenedor img ">
          <img [src]="'http://localhost:4000/' + item.producto.imagen" alt="{{ item.producto.nombre }}"
            class="img-producto" onerror="this.src='assets/no-image.png'">
        </div>

        <div class="info-producto">
          <h3>{{ item.producto.nombre }}</h3>
          <p class="precio-unitario">Precio: {{ item.producto.precio | currency:'MXN' }}</p>
        </div>

        <div class="controles-cantidad">
          <button (click)="disminuir(item.producto.id)" class="btn-cantidad">-</button>
          <span class="cantidad">{{ item.cantidad }}</span>
          <button (click)="aumentar(item.producto)" class="btn-cantidad">+</button>
        </div>

        <div class="subtotal-item">
          {{ (item.producto.precio * item.cantidad) | currency:'MXN' }}
        </div>

        <button (click)="quitar(item.producto.id)" class="btn-eliminar" title="Eliminar producto">
          üóëÔ∏è
        </button>
      </div>

    </div>

    <div class="resumen-pago">
      <h3>Resumen</h3>
      <div class="fila">
        <span>Subtotal:</span>
        <span>{{ subtotal() | currency:'MXN' }}</span>
      </div>
      <div class="fila">
        <span>IVA (16%):</span>
        <span>{{ iva() | currency:'MXN' }}</span>
      </div>
      <div class="fila total">
        <span>Total:</span>
        <span>{{ total() | currency:'MXN' }}</span>
      </div>

      <div class="acciones">
        <button (click)="vaciar()" class="btn-vaciar">Vaciar Carrito</button>

        <ngx-paypal [config]="payPalConfig"></ngx-paypal>
      </div>
    </div>
  </div>
</div>